@import "_animate";
@import "_font";

@hidePreviousStationDuration: 500ms; // Check screen-station-details.js before update
@titleDelay: 100ms;
@nameDelay: 200ms;
@nextTitleDelay: 1s;
@nextStationDelay: 1.1s;


.b-station-details__header-footer-out-keyframes {
    0% {
        .transform(translateY(0));
    }

    100% {
        .transform(translateY(768px)); // Must be more than screen height
    }
}

.b-station-details__header-bg-keyframes() {
    0% {
        opacity: 0.5;
    }

    100% {
        opacity: 1;
    }
}

.b-station-details__header-text-keyframes() {
    0% {
        .transform(translateY(-82px));
    }

    100% {
        .transform(translateY(0));
    }
}

.b-station-details__transfer-fade-in-keyframes() {
    0% {
        opacity: 0;
    }

    100% {
        opacity: 1;
    }
}

.b-station-details__transfer-fade-out-keyframes() {
    0% {
        opacity: 0.99;
    }

    100% {
        opacity: 0;
    }
}

.b-station-details__transfer-icon-keyframes() {
    0% {
        .transform(translateY(-70px));
    }

    100% {
        .transform(translateY(0));
    }
}

@-webkit-keyframes b-station-details__header-footer-out { .b-station-details__header-footer-out-keyframes }
   @-moz-keyframes b-station-details__header-footer-out { .b-station-details__header-footer-out-keyframes }
    @-ms-keyframes b-station-details__header-footer-out { .b-station-details__header-footer-out-keyframes }
     @-o-keyframes b-station-details__header-footer-out { .b-station-details__header-footer-out-keyframes }
        @keyframes b-station-details__header-footer-out { .b-station-details__header-footer-out-keyframes }

@-webkit-keyframes b-station-details__header-bg { .b-station-details__header-bg-keyframes }
   @-moz-keyframes b-station-details__header-bg { .b-station-details__header-bg-keyframes }
    @-ms-keyframes b-station-details__header-bg { .b-station-details__header-bg-keyframes }
     @-o-keyframes b-station-details__header-bg { .b-station-details__header-bg-keyframes }
        @keyframes b-station-details__header-bg { .b-station-details__header-bg-keyframes }

@-webkit-keyframes b-station-details__header-text { .b-station-details__header-text-keyframes }
   @-moz-keyframes b-station-details__header-text { .b-station-details__header-text-keyframes }
    @-ms-keyframes b-station-details__header-text { .b-station-details__header-text-keyframes }
     @-o-keyframes b-station-details__header-text { .b-station-details__header-text-keyframes }
        @keyframes b-station-details__header-text { .b-station-details__header-text-keyframes }

@-webkit-keyframes b-station-details__transfer-fade-in { .b-station-details__transfer-fade-in-keyframes }
   @-moz-keyframes b-station-details__transfer-fade-in { .b-station-details__transfer-fade-in-keyframes }
    @-ms-keyframes b-station-details__transfer-fade-in { .b-station-details__transfer-fade-in-keyframes }
     @-o-keyframes b-station-details__transfer-fade-in { .b-station-details__transfer-fade-in-keyframes }
        @keyframes b-station-details__transfer-fade-in { .b-station-details__transfer-fade-in-keyframes }

@-webkit-keyframes b-station-details__transfer-fade-out { .b-station-details__transfer-fade-out-keyframes }
   @-moz-keyframes b-station-details__transfer-fade-out { .b-station-details__transfer-fade-out-keyframes }
    @-ms-keyframes b-station-details__transfer-fade-out { .b-station-details__transfer-fade-out-keyframes }
     @-o-keyframes b-station-details__transfer-fade-out { .b-station-details__transfer-fade-out-keyframes }
        @keyframes b-station-details__transfer-fade-out { .b-station-details__transfer-fade-out-keyframes }

@-webkit-keyframes b-station-details__transfer-icon { .b-station-details__transfer-icon-keyframes }
   @-moz-keyframes b-station-details__transfer-icon { .b-station-details__transfer-icon-keyframes }
    @-ms-keyframes b-station-details__transfer-icon { .b-station-details__transfer-icon-keyframes }
     @-o-keyframes b-station-details__transfer-icon { .b-station-details__transfer-icon-keyframes }
        @keyframes b-station-details__transfer-icon { .b-station-details__transfer-icon-keyframes }

.b-station-details {
    position: relative;
}

// Header
.b-station-details__header {
    position: relative;
    padding-left: 160px;
}

.b-station-details__line {
    position: absolute;
    top: 70px;
    left: 0;

    width: 125px;
    height: 125px;
    overflow: hidden;

    border-radius: 50%;
    background: silver;

    /* This fixes the overflow:hidden in Chrome */
    -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);

    .animation-name("b-station-details__header-bg");
    .animation-duration(0.5s);
}

.b-station-details__line-text {
    line-height: 125px;
    text-align: center;
    font-size: 60px;
    .font-feature-settings("salt");
    .font-bold();

    .animation-name("b-station-details__header-text");
    .animation-duration(0.7s);
    .animation-delay(@nameDelay);
    .animation-fill-mode(backwards);
}

.b-station-details__station-title {
    font-size: 60px;
    .font-light();

    .animate {
        .transition-delay(@titleDelay); // Delay for .b-scrollable-text
    }
}

.b-station-details__station-name-1,
.b-station-details__station-name-2 {
    font-size: 90px;

    .animate {
        .transition-delay(@nameDelay); // Delay for .b-scrollable-text
    }
}

// Footer
.b-station-details__footer {
    position: absolute;
    bottom: 0;
}

// Out animation
.b-station-details__header,
.b-station-details__footer {
    &.animate-out {
        .animation-name("b-station-details__header-footer-out");
        .animation-duration(@hidePreviousStationDuration);
        .animation-fill-mode(forwards);
    }
}

// __transfer
.b-station-details__transfer {
    margin-top: 10px;
    margin-left: 160px;

    -webkit-transform: rotate(0); // Fixes animation issues
            transform: rotate(0);

    .animation-name(b-station-details__transfer-fade-in);
    .animation-fill-mode(both);
    .animation-duration(1000ms);
    .animation-delay(@nextTitleDelay);
}

.b-station-details__transfer-option {
    margin-bottom: 60px;

    &:last-child {
        margin-bottom: 0;
    }
}

.b-station-details__transfer-title {
    font-size: 45px;
    .font-light();

    margin-bottom: -5px;

    .animate {
        .transition-delay(@nextTitleDelay); // Delay for .b-scrollable-text
    }
}

.b-station-details__transfer-name-wrap {
    white-space: nowrap;

    >div {
        display: inline-block;
    }

    .b-transfer-icon {
        &:before,
        &:after {
            width: 70px;
            height: 70px;
        }
    }

    .b-transfer-icon_tram {
        margin-right: 5px;

        &:before {
            margin-right: 32px;
        }
    }
}

.b-station-details__transfer-icon-wrap {
    display: inline-block;

    height: 70px;
    overflow-y: hidden;

    position: relative;
    top: 0;
    left: -10px;

    min-width: 90px;
    margin-left: -90px;
    vertical-align: middle;
}

.b-station-details__transfer-name {
    font-size: 60px;
    vertical-align: middle;

    position: relative;
    left: -4px;

    .animate {
        .transition-delay(@nextStationDelay); // Delay for .b-scrollable-text
    }
}

// __end & __exit
.b-station-details__end,
.b-station-details__exit {
    position: relative;
    padding-left: 160px;
    margin-bottom: 32px;
}

.b-station-details__end-icon,
.b-station-details__exit-icon {
    position: absolute;
    top: 7px;
    left: 53px;

    width: 72px;
    height: 64px;
    overflow: hidden;

    background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzJweCIgaGVpZ2h0PSI2NHB4IiB2aWV3Qm94PSIwIDAgNzIgNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQxLjIgKDM1Mzk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT53YXJuaW5nPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Indhcm5pbmciIGZpbGw9IiNGRkMyMTciPgogICAgICAgICAgICA8cGF0aCBkPSJNMzIuMDE4NjcxMiwyLjg4NDc5MzY5IEMzNC4yMTc0OTg0LC0wLjk1MjYzODU2NyAzNy43NzcwOTExLC0wLjk2MjA4MTA2MSAzOS45ODEzMjg4LDIuODg0NzkzNjkgTDcxLjAxODY3MTIsNTcuMDUxNzE0MiBDNzMuMjE3NDk4NCw2MC44ODkxNDY1IDcxLjQyMDExNjQsNjQgNjcuMDAxMDIxNSw2NCBMNC45OTg5Nzg0OCw2NCBDMC41ODEyNjQ2NSw2NCAtMS4yMjI5MDg4NSw2MC44OTg1ODkgMC45ODEzMjg4NSw1Ny4wNTE3MTQyIEwzMi4wMTg2NzEyLDIuODg0NzkzNjkgWiBNMzYsMTIgTDYyLDU3IEwxMCw1NyBMMzYsMTIgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNiw0NiBDMzMuNTU1OTU0NSw0NiAzMiw0Ny43Nzc1NjU2IDMyLDUwIEMzMiw1Mi4yMjI0MzQ0IDMzLjU1NTk1NDUsNTQgMzYsNTQgQzM4LjQ0NDA0NTUsNTQgNDAsNTIuMjIyNDM0NCA0MCw1MCBDMzkuNzc2OTAwMSw0Ny41NTUxMzEzIDM4LjIyMTkwMzEsNDYgMzYsNDYgTDM2LDQ2IFogTTMzLjE0Mjg1NzEsNDIgTDM4Ljg1NzE0MjksNDIgTDQwLDI2IEwzMiwyNiBMMzMuMTQyODU3MSw0MiBaIiBpZD0iRmlsbC0xIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=");
    background-repeat: no-repeat;
}

.b-station-details__end-line-1,
.b-station-details__exit-message {
    font-size: 65px;

    letter-spacing: 1px;
    word-spacing: 0;

    .animate {
        .transition-delay(@nextTitleDelay); // Delay for .b-scrollable-text
    }
}

.b-station-details__end-line-2 {
    font-size: 45px;
    margin-top: 12px;
    .font-light();

    .animate {
        .transition-delay(@nextStationDelay); // Delay for .b-scrollable-text
    }
}

// Modifier: Multi screen
.b-station-details_multi-screen {
    .b-station-details__transfer {
        .animation-name(b-station-details__transfer-fade-out);
        .animation-fill-mode(forwards);
        .animation-duration(1000ms);
        .animation-delay(4s);
    }

    .b-transfer-icon {
        position: relative;

        .animation-name(b-station-details__transfer-icon);
        .animation-fill-mode(backwards);
        .animation-duration(0.7s);
        .animation-delay(@nextTitleDelay);
    }
}

// Modifier: First update on multi screen
.b-station-details_first-update.b-station-details_multi-screen {
    .b-station-details__transfer {
        .animation-name(~"b-station-details__transfer-fade-in, b-station-details__transfer-fade-out");
        .animation-fill-mode(~"backwards, forwards");
        .animation-duration(~"1000ms, 1000ms");
        .animation-delay(~"@{nextTitleDelay}, 4s");
    }
}